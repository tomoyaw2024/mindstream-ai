# MindStream AI インストール・テストガイド

## 📦 インストール手順

### 1. 事前準備

#### 必要なもの
- Google Chrome（バージョン88以降）
- Google Cloudアカウント
- Google AI Studioアカウント

### 2. APIキーの取得

#### YouTube Data API v3
1. [Google Cloud Console](https://console.cloud.google.com/)にアクセス
2. 新しいプロジェクトを作成
3. 「APIとサービス」→「ライブラリ」でYouTube Data API v3を有効化
4. 「認証情報」→「APIキーを作成」
5. キーをコピーして保存

#### Gemini API
1. [Google AI Studio](https://makersuite.google.com/)にアクセス
2. 「Get API key」→「Create API key」
3. キーをコピーして保存

### 3. 拡張機能の設定

1. config.jsファイルを作成：
```bash
cp src/utils/config.js.example src/utils/config.js
```

2. `src/utils/config.js`を開いてAPIキーを設定：
```javascript
const CONFIG = {
  YOUTUBE_API_KEY: 'ここにYouTube APIキーを貼り付け',
  GEMINI_API_KEY: 'ここにGemini APIキーを貼り付け',
  // 他の設定はそのまま
};
```

**⚠️ 重要**: `config.js`は`.gitignore`に含まれています。公開リポジトリにプッシュしないよう注意してください。

### 4. Chromeに拡張機能を読み込む

1. Chromeで`chrome://extensions/`を開く
2. 右上の「デベロッパーモード」をON
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. `mindstream-ai`フォルダを選択
5. 拡張機能が一覧に表示されることを確認

## 🧪 動作テスト

### 基本動作テスト

1. **拡張機能の確認**
   - Chromeツールバーに拡張機能アイコンが表示される
   - クリックしてポップアップが開く

2. **YouTube動画でのテスト**
   - テスト用動画: 益田裕介先生のチャンネルから任意の動画を選択
   - 例: https://www.youtube.com/watch?v=XXXXXXXXXX
   - 動画ページを開いて2-3秒待つ
   - 右側にMindStream AIパネルが表示される

### APIキーなしでのテスト（デモモード）

APIキーを設定していない場合、自動的にサンプルデータが表示されます：

1. 任意のYouTube動画を開く
2. MindStream AIパネルが表示
3. サンプルクラスターが表示される：
   - 💊 薬に関する体験談
   - 😰 診断前の不安・悩み
   - 👨‍👩‍👧‍👦 家族・周囲の理解

### 機能別テスト

#### 1. コメント分析
- [ ] パネルに「コメントを分析中...」が表示
- [ ] 分析完了後、クラスターが表示
- [ ] 各クラスターにアイコン、タイトル、件数が表示

#### 2. UI操作
- [ ] パネルの✕ボタンで閉じられる
- [ ] クラスターカードがホバーで反応
- [ ] スクロールが正常に動作

#### 3. 薬機法対応
- [ ] 免責事項が表示されている
- [ ] 医療用語が適切に処理されている

#### 4. キャッシュ機能
- [ ] 同じ動画を再度開いた時、即座に結果表示
- [ ] ポップアップでキャッシュクリアが動作

## 🐛 トラブルシューティング

### よくある問題と解決方法

#### パネルが表示されない
1. コンソールでエラーを確認（F12キー）
2. 拡張機能を再読み込み
3. ページをリロード

#### APIエラー
1. APIキーが正しく設定されているか確認
2. APIの使用量制限を確認
3. コンソールでエラーメッセージを確認

#### スタイルが崩れる
1. 他の拡張機能との競合を確認
2. YouTubeの仕様変更を確認

### デバッグ方法

1. **Chrome DevTools**
   - F12キーで開発者ツールを開く
   - Consoleタブでエラーを確認
   - Networkタブで API通信を確認

2. **拡張機能のデバッグ**
   - `chrome://extensions/`で詳細を表示
   - 「エラー」をクリックしてエラー詳細を確認
   - 「サービスワーカー」をクリックしてバックグラウンドをデバッグ

3. **ログの確認**
   ```javascript
   // コンソールで実行
   chrome.storage.local.get(null, (data) => console.log(data));
   ```

## 📊 パフォーマンステスト

### 測定項目
- 初期表示時間: 3秒以内
- コメント取得: 5秒以内
- クラスタリング: 10秒以内

### 負荷テスト
- 1000件のコメント処理
- 連続10動画の分析
- 24時間の連続動作

## ✅ リリース前チェックリスト

- [ ] APIキーが正しく設定されている
- [ ] エラーハンドリングが適切
- [ ] 薬機法対応の免責事項表示
- [ ] キャッシュ機能が正常動作
- [ ] UIがレスポンシブ対応
- [ ] アクセシビリティ対応
- [ ] セキュリティ（APIキーの保護）
- [ ] パフォーマンス基準を満たす

## 📝 テスト結果記録

```
テスト日: ____年__月__日
テスター: __________
Chromeバージョン: __________

基本動作: OK / NG
API連携: OK / NG
UI表示: OK / NG
薬機法: OK / NG

備考:
_________________________
_________________________
```

---

問題が発生した場合は、[GitHub Issues](https://github.com/yourusername/mindstream-ai/issues)に報告してください。